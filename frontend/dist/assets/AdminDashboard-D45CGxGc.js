import{r as n,ap as e}from"./vendor-CFsy__N8.js";import{a as c,D as L,b as Te}from"./index-Dq5N61t0.js";import{o as E}from"./offline-BGNqmuom.js";import{l as ut,m as ht,n as mt,i as xt,o as pt,F as gt,T as ft}from"./vendor-icons-DxUJAirC.js";import"./vendor-router-CySAd55F.js";import"./vendor-axios-NIGUFBhG.js";function Ct(){const[l,$]=n.useState([]),[w,M]=n.useState([]),[g,D]=n.useState([]),[P,V]=n.useState([]),[p,F]=n.useState([]),[f,k]=n.useState([]),[y,ne]=n.useState({from:"",to:""}),[x,X]=n.useState({year:"",branch:""}),[a,m]=n.useState(null),[o,d]=n.useState(""),[ie,b]=n.useState("success"),[me,Ue]=n.useState(""),[S,ye]=n.useState({year:"",branch:""}),[W,C]=n.useState(!1),[z,He]=n.useState([]),[v,be]=n.useState({from:"",to:""}),[le,je]=n.useState(""),[xe,Ne]=n.useState(!1),[O,oe]=n.useState([]),[_e,ce]=n.useState(!1),[Ye,we]=n.useState(!1),[A,ke]=n.useState(null),[Se,Ce]=n.useState(""),[K,Ae]=n.useState(!1),[Q,Le]=n.useState(!1),[J,De]=n.useState(!1),[Z,pe]=n.useState(!1),[Y,qe]=n.useState("all"),[h,Ge]=n.useState("overstays"),[I,Xe]=n.useState(()=>new Set(["overstays"])),We=6e4,B=n.useRef({pending:0,overstays:0,students:0,security:0,logs:0}),Ke=()=>{try{return typeof document<"u"?document.visibilityState==="visible":!0}catch{return!0}},ee=(t,s=!1)=>{var i;if(s)return!0;const r=((i=B.current)==null?void 0:i[t])||0;return Date.now()-r>We},te=t=>{B.current[t]=Date.now()},U=t=>{Ge(t),Xe(s=>{if(s.has(t))return s;const r=new Set(s);return r.add(t),r}),t!=="visitors"&&ae(t,{showLoading:!0}).catch(()=>{})},j=n.useCallback(async({force:t=!1,showLoading:s=!1}={})=>{if(ee("pending",t)){s&&C(!0);try{const[r,i,N]=await Promise.all([c.get("/admin/students/pending"),c.get("/admin/security/pending"),c.get("/admin/admins/pending")]);$(r.data),M(i.data),D(N.data),te("pending")}catch{navigator!=null&&navigator.onLine||(d("Offline mode: pending lists may be outdated"),b("error"))}finally{s&&C(!1)}}},[]),q=n.useCallback(async({force:t=!1,showLoading:s=!1}={})=>{if(ee("students",t)){s&&C(!0);try{const r=await c.get("/admin/students");V(r.data),E.saveStudents(r.data).catch(()=>{}),te("students")}catch{const i=await E.loadStudents().catch(()=>[]);i.length&&(V(i),d("Offline mode: showing cached students"),b("error"))}finally{s&&C(!1)}}},[]),de=n.useCallback(async({force:t=!1,showLoading:s=!1}={})=>{if(ee("security",t)){s&&C(!0);try{const r=await c.get("/admin/users",{params:{role:"security",approvedOnly:!0}});F(r.data),E.saveSecurityUsers(r.data).catch(()=>{}),te("security")}catch{const i=await E.loadSecurityUsers().catch(()=>[]);i.length&&(F(i),d("Offline mode: showing cached security users"),b("error"))}finally{s&&C(!1)}}},[]),se=n.useCallback(async({force:t=!1,showLoading:s=!1}={})=>{if(ee("logs",t)){s&&C(!0);try{const r=await c.get("/admin/logs",{params:y.from||y.to?{...y}:{}});k(r.data),E.saveLogs(r.data).catch(()=>{}),te("logs")}catch{const i=await E.loadLogs().catch(()=>[]);i.length&&(k(i),d("Offline mode: showing cached logs"),b("error"))}finally{s&&C(!1)}}},[y.from,y.to]),ue=n.useCallback(async({force:t=!1,showLoading:s=!1}={})=>{if(ee("overstays",t)){s&&C(!0);try{const r={};v.from&&(r.from=v.from),v.to&&(r.to=v.to);const i=await c.get("/admin/overstays",{params:r});He(i.data||[]),te("overstays")}catch{navigator!=null&&navigator.onLine||(d("Offline mode: overstays may be outdated"),b("error"))}finally{s&&C(!1)}}},[v.from,v.to]),ae=n.useCallback(async(t,{force:s=!1,showLoading:r=!1}={})=>{if(a!=null&&a.isApproved){if(t==="pending")return j({force:s,showLoading:r});if(t==="overstays")return ue({force:s,showLoading:r});if(t==="students")return q({force:s,showLoading:r});if(t==="security")return de({force:s,showLoading:r});if(t==="logs")return se({force:s,showLoading:r})}},[a==null?void 0:a.isApproved,j,ue,q,de,se]);n.useEffect(()=>{(async()=>{try{const{data:t}=await c.get("/auth/me");m(t),t!=null&&t.isApproved&&await Promise.all([ae("pending",{force:!0,showLoading:!1}),ae(h,{force:!0,showLoading:!0})])}catch{}})()},[]),n.useEffect(()=>{if(!(a!=null&&a.isApproved))return;const t=setInterval(()=>{h==="overstays"&&Ke()&&ae("overstays",{force:!0,showLoading:!1}).catch(()=>{})},5*6e4);return()=>clearInterval(t)},[a==null?void 0:a.isApproved,h,ae,v.from,v.to]),n.useEffect(()=>{if(!o)return;const t=setTimeout(()=>d(""),2e3);return()=>clearTimeout(t)},[o]);const Qe=async t=>{await c.post(`/admin/students/${t}/approve`),await Promise.all([j({force:!0}),q({force:!0})])},Je=async t=>{await c.post(`/admin/students/${t}/decline`),await j({force:!0})},Ze=async t=>{await c.post(`/admin/security/${t}/approve`),await Promise.all([j({force:!0}),de({force:!0})])},et=async t=>{await c.post(`/admin/security/${t}/decline`),await j({force:!0})},tt=async t=>{await c.post(`/admin/admins/${t}/approve`),await j({force:!0})},st=async t=>{await c.post(`/admin/admins/${t}/decline`),await j({force:!0})},at=async()=>{var r;if(!confirm("Approve all pending students (filtered)? Pins and QR will be generated automatically."))return;const t={batchYear:S.year?Number(S.year):void 0,branch:S.branch||void 0},s=await c.post("/admin/students/approve-all",t);d(`${((r=s.data)==null?void 0:r.approved)||0} students approved`),b("success"),await Promise.all([j({force:!0}),q({force:!0})])},rt=async()=>{var r;if(!confirm("Reject all pending students (filtered)?"))return;const t={batchYear:S.year?Number(S.year):void 0,branch:S.branch||void 0},s=await c.post("/admin/students/decline-all",t);d(`${((r=s.data)==null?void 0:r.declined)||0} students rejected`),b("success"),await j({force:!0})},G=async(t,s)=>{try{const r={type:s};s==="overstays"?(r.from=v.from||void 0,r.to=v.to||void 0):(r.from=y.from||void 0,r.to=y.to||void 0,s==="students"&&Y!=="all"&&(r.action=Y)),await Te(`/api/export/${t}`,r,`${s}-logs.${t}`)}catch(r){d(r.message||"Export failed"),b("error")}},Pe=async t=>{try{const s={type:"student-details",batchYear:x.year||void 0,branch:x.branch||void 0},r=`student-details${x.year?"-"+x.year:""}${x.branch?"-"+x.branch:""}.${t}`;await Te(`/api/export/${t}`,s,r)}catch(s){d(s.message||"Export failed"),b("error")}},nt=async()=>{if(!confirm("This will permanently delete logs and visitors older than the cutoff. Continue?"))return;const t=me?{before:me}:{months:3},{data:s}=await c.post("/admin/purge-old",t);d(`Deleted ${s.deletedLogs} logs and ${s.deletedVisitors} visitors (<= ${new Date(s.cutoff).toLocaleDateString()})`),b("success"),B.current.logs=0,B.current.overstays=0,await Promise.all([h==="logs"?se({force:!0}):Promise.resolve(),h==="overstays"?ue({force:!0}):Promise.resolve()])},it=async t=>{confirm("Delete this student permanently?")&&(await c.delete(`/admin/students/${t}`),B.current.students=0,B.current.logs=0,await Promise.all([q({force:!0}),h==="logs"?se({force:!0}):Promise.resolve(),j({force:!0})]))},lt=async t=>{confirm("Delete this security user permanently?")&&(await c.delete(`/admin/security/${t}`),await Promise.all([de({force:!0}),j({force:!0})]))},Oe=async()=>{await ue({force:!0,showLoading:!0}),d("Overstay list updated"),b("success")},ot=async t=>{await c.post(`/admin/overstays/${t}/resolve`),await Oe()},ct=async()=>{const{year:t,branch:s}=x;if(!t)return alert("Select a batch year");confirm(`Delete all students from batch ${t}${s?" ("+s+")":""}?`)&&(await c.post("/admin/students/batch-delete",{batchYear:Number(t),branch:s||void 0}),B.current.students=0,B.current.logs=0,await Promise.all([q({force:!0}),h==="logs"?se({force:!0}):Promise.resolve(),j({force:!0})]))},$e=async()=>{var s,r;const t=(le||"").trim();if(oe([]),ce(!1),!!t)try{Ne(!0);const{data:i}=await c.get("/admin/students/search",{params:{q:t}});oe(Array.isArray(i)?i:[])}catch(i){oe([]),d(((r=(s=i==null?void 0:i.response)==null?void 0:s.data)==null?void 0:r.message)||"Search failed"),b("error")}finally{Ne(!1)}},Me=async t=>{var s,r;if(t){Ce(""),ke(null),ce(!0);try{we(!0);const{data:i}=await c.get(`/admin/students/${encodeURIComponent(t)}/details`);ke(i)}catch(i){Ce(((r=(s=i==null?void 0:i.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to load details")}finally{we(!1)}}},dt=()=>{je(""),oe([]),pe(!1)},R=n.useMemo(()=>{const t=Array.isArray(P)?[...P]:[],s=(le||"").trim().toLowerCase();if(!s)return t.sort((i,N)=>{const H=String(i.registrationNo||""),ge=String(N.registrationNo||""),re=H.localeCompare(ge,void 0,{numeric:!0,sensitivity:"base"});return re!==0?re:String(i.name||"").localeCompare(String(N.name||""),void 0,{sensitivity:"base"})});const r=i=>{const N=String(i.name||"").toLowerCase(),H=String(i.registrationNo||"").toLowerCase();return H===s?0:N===s?.1:H.startsWith(s)?.2:N.startsWith(s)?.3:H.includes(s)?.4:N.includes(s)?.5:1};return t.map(i=>({it:i,s:r(i)})).sort((i,N)=>{if(i.s!==N.s)return i.s-N.s;const H=String(i.it.registrationNo||""),ge=String(N.it.registrationNo||""),re=H.localeCompare(ge,void 0,{numeric:!0,sensitivity:"base"});return re!==0?re:String(i.it.name||"").localeCompare(String(N.it.name||""),void 0,{sensitivity:"base"})}).map(({it:i})=>i)},[P,le]),Fe=n.useMemo(()=>K?z:z.slice(0,50),[z,K]),ze=n.useMemo(()=>Q?R:R.slice(0,50),[R,Q]),Be=n.useMemo(()=>{const t=Array.isArray(f)?f:[],s=Y==="all"?t:t.filter(r=>r.action===Y);return J?s:s.slice(0,50)},[f,J,Y]),Re=n.useMemo(()=>Z?O:O.slice(0,50),[O,Z]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Admin Dashboard"}),a&&!a.isApproved&&!a.requestedApproval&&e.jsxs("div",{className:"rounded border border-red-200 bg-red-50 text-red-800 p-4 flex items-start gap-3",children:[e.jsx("div",{className:"font-semibold",children:"Application was rejected"}),e.jsx("div",{className:"ml-auto",children:e.jsx("button",{className:"btn",onClick:async()=>{await c.post("/auth/admin/request-approval"),m({...a,requestedApproval:!0}),d("Request sent"),b("success")},children:"Send request again"})})]}),a&&!a.isApproved&&a.requestedApproval&&e.jsx("div",{className:"rounded border border-blue-200 bg-blue-50 text-blue-800 p-3",children:"Application submitted — please wait for admin approval."}),o&&e.jsx("div",{role:"alert",className:`fixed top-4 right-4 z-50 shadow-lg rounded px-4 py-3 transition-opacity duration-300 ${ie==="error"?"bg-red-600 text-white":"bg-green-600 text-white"}`,children:o}),(a==null?void 0:a.isApproved)&&e.jsx("div",{className:"relative",children:e.jsxs("div",{role:"tablist","aria-label":"Admin sections",className:"-mb-2 border-b border-gray-200 dark:border-gray-800 pb-2 grid grid-cols-3 gap-2 sm:grid-cols-4 md:flex md:flex-nowrap md:overflow-x-auto md:no-scrollbar",children:[e.jsx(_,{icon:e.jsx(ut,{className:"h-4 w-4"}),label:"Pending",value:"pending",active:h==="pending",onClick:()=>U("pending"),badge:l.length+w.length+g.length||0}),e.jsx(_,{icon:e.jsx(ht,{className:"h-4 w-4"}),label:"Overstays",value:"overstays",active:h==="overstays",onClick:()=>U("overstays")}),e.jsx(_,{icon:e.jsx(mt,{className:"h-4 w-4"}),label:"Students",value:"students",active:h==="students",onClick:()=>U("students")}),e.jsx(_,{icon:e.jsx(xt,{className:"h-4 w-4"}),label:"Security",value:"security",active:h==="security",onClick:()=>U("security")}),e.jsx(_,{icon:e.jsx(pt,{className:"h-4 w-4"}),label:"Logs",value:"logs",active:h==="logs",onClick:()=>U("logs")}),e.jsx(_,{icon:e.jsx(gt,{className:"h-4 w-4"}),label:"Visitors",value:"visitors",active:h==="visitors",onClick:()=>U("visitors")}),e.jsx(_,{icon:e.jsx(ft,{className:"h-4 w-4"}),label:"Maintenance",value:"maintenance",active:h==="maintenance",onClick:()=>U("maintenance")})]})}),(a==null?void 0:a.isApproved)&&I.has("pending")&&e.jsxs("div",{role:"tabpanel",id:"panel-pending","aria-labelledby":"tab-pending",className:h==="pending"?"":"hidden",children:[l.length>0&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-3 mb-2",children:[e.jsx("div",{className:"font-semibold",children:"Pending Student Approvals"}),e.jsxs("div",{className:"flex flex-wrap items-end gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"Batch Year"}),e.jsxs("select",{className:"input",value:S.year,onChange:t=>ye({...S,year:t.target.value}),children:[e.jsx("option",{value:"",children:"All"}),Array.from({length:31},(t,s)=>2020+s).map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"Branch"}),e.jsxs("select",{className:"input",value:S.branch,onChange:t=>ye({...S,branch:t.target.value}),children:[e.jsx("option",{value:"",children:"All"}),["CSE","Civil","Mechanical","EEE","FPP"].map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsx(u,{color:"teal",onClick:at,title:"Approve all",icon:e.jsx(Ve,{className:"h-4 w-4"}),children:"Approve All"}),e.jsx(u,{color:"rose",onClick:rt,title:"Reject all",icon:e.jsx(Ie,{className:"h-4 w-4"}),children:"Reject All"})]})]}),e.jsx(L,{maxHeight:"60vh",containerClassName:"scroll-thin",columns:[{key:"registrationNo",title:"Reg No"},{key:"name",title:"Name"},{key:"branch",title:"Branch"},{key:"batchYear",title:"Batch"},{key:"action",title:"Action",render:(t,s)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(fe,{onClick:()=>Qe(s.id)}),e.jsx(ve,{onClick:()=>Je(s.id)})]})}],data:l})]}),w.length>0&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"font-semibold mb-2",children:"Pending Security Approvals"}),e.jsx(L,{maxHeight:"40vh",containerClassName:"scroll-thin",columns:[{key:"name",title:"Name"},{key:"registrationNo",title:"Identifier"},{key:"action",title:"Action",render:(t,s)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(fe,{onClick:()=>Ze(s.id)}),e.jsx(ve,{onClick:()=>et(s.id)})]})}],data:w})]}),g.length>0&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"font-semibold mb-2",children:"Pending Admin Approvals"}),e.jsx(L,{maxHeight:"40vh",containerClassName:"scroll-thin",columns:[{key:"name",title:"Name"},{key:"registrationNo",title:"Identifier"},{key:"action",title:"Action",render:(t,s)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(fe,{onClick:()=>tt(s.id)}),e.jsx(ve,{onClick:()=>st(s.id)})]})}],data:g})]})]}),(a==null?void 0:a.isApproved)&&I.has("overstays")&&e.jsx("div",{role:"tabpanel",id:"panel-overstays","aria-labelledby":"tab-overstays",className:h==="overstays"?"":"hidden",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-3 mb-2",children:[e.jsx("div",{className:"font-semibold",children:"Overstay Alerts"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"From"}),e.jsx("input",{type:"datetime-local",className:"input",value:v.from,onChange:t=>be({...v,from:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"To"}),e.jsx("input",{type:"datetime-local",className:"input",value:v.to,onChange:t=>be({...v,to:t.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{color:"teal",size:"sm",onClick:Oe,title:"Refresh overstay list",children:"Filter"}),e.jsx(u,{color:"indigo",size:"sm",onClick:()=>G("pdf","overstays"),icon:e.jsx(T,{className:"h-4 w-4"}),children:"PDF"}),e.jsx(u,{color:"indigo",size:"sm",variant:"outline",onClick:()=>G("docx","overstays"),icon:e.jsx(T,{className:"h-4 w-4"}),children:"DOCX"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 mt-2",children:[e.jsxs("div",{className:"text-xs sm:text-sm text-gray-400",children:["Showing ",e.jsx("span",{className:"font-medium text-gray-200",children:Fe.length}),z.length>50&&!K&&e.jsxs(e.Fragment,{children:[" ","of ",e.jsx("span",{className:"font-medium",children:z.length}),e.jsx("span",{className:"ml-1 text-[10px] uppercase tracking-wider px-2 py-0.5 rounded-full bg-slate-700/60 border border-white/10",children:"Latest"})]}),K&&z.length>50&&e.jsx("span",{className:"ml-2 text-[10px] uppercase tracking-wider px-2 py-0.5 rounded-full bg-gradient-to-r from-cyan-500/20 to-violet-500/20 border border-cyan-400/30 text-cyan-200",children:"All"})]}),z.length>50&&e.jsx("div",{className:"flex gap-2",children:K?e.jsx("button",{type:"button",onClick:()=>Ae(!1),className:"relative inline-flex items-center gap-2 px-4 py-1.5 rounded-lg text-xs sm:text-sm font-medium bg-slate-800/60 hover:bg-slate-700/70 border border-white/10 text-violet-300 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-violet-400/50",children:"Show Less"}):e.jsxs("button",{type:"button",onClick:()=>Ae(!0),className:"relative inline-flex items-center gap-2 px-4 py-1.5 rounded-lg text-xs sm:text-sm font-medium bg-slate-800/60 hover:bg-slate-700/70 border border-white/10 text-cyan-300 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400/50 group overflow-hidden",children:[e.jsx("span",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 bg-gradient-to-r from-cyan-500/10 via-teal-500/10 to-violet-500/10 transition"}),"Show More",e.jsxs("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-cyan-500/20 border border-cyan-400/30 text-cyan-200",children:["+",z.length-50]})]})})]}),e.jsx(L,{maxHeight:"50vh",containerClassName:"scroll-thin",columns:[{key:"registrationNo",title:"Reg No"},{key:"name",title:"Name"},{key:"branch",title:"Branch"},{key:"batchYear",title:"Batch"},{key:"purpose",title:"Purpose"},{key:"checkOutTime",title:"Checked-out",render:t=>t?new Date(t).toLocaleString():"-"},{key:"flaggedAt",title:"Flagged",render:t=>t?new Date(t).toLocaleString():"-"},{key:"durationHours",title:"Hours",render:(t,s)=>e.jsx("span",{title:typeof s.hoursOutsideAtFlag=="number"?`At flag: ${s.hoursOutsideAtFlag}h`:"",children:typeof t=="number"?t:typeof s.hoursOutsideAtFlag=="number"?s.hoursOutsideAtFlag:"-"})},{key:"resolved",title:"Status",render:(t,s)=>t?`Resolved${s.checkInTime?" at "+new Date(s.checkInTime).toLocaleString():""}`:"Open"},{key:"action",title:"Action",render:(t,s)=>s.resolved?e.jsx("span",{className:"text-green-500",children:"—"}):e.jsx(u,{color:"amber",size:"xs",onClick:()=>ot(s._id),children:"Mark Resolved"})}],data:Fe})]})}),(a==null?void 0:a.isApproved)&&I.has("students")&&e.jsx("div",{role:"tabpanel",id:"panel-students","aria-labelledby":"tab-students",className:h==="students"?"":"hidden",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4 mb-2",children:[e.jsx("div",{className:"font-semibold",children:"Students"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"Batch Year"}),e.jsxs("select",{className:"input",value:x.year,onChange:t=>X({...x,year:t.target.value}),children:[e.jsx("option",{value:"",children:"Select year"}),Array.from({length:31},(t,s)=>2020+s).map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"Branch (optional)"}),e.jsxs("select",{className:"input",value:x.branch,onChange:t=>X({...x,branch:t.target.value}),children:[e.jsx("option",{value:"",children:"All"}),["CSE","Civil","Mechanical","EEE","FPP"].map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsx(u,{color:"amber",onClick:ct,title:"Batch delete",icon:e.jsx(he,{className:"h-4 w-4"}),children:"Batch Delete"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{color:"indigo",size:"sm",onClick:()=>Pe("pdf"),icon:e.jsx(T,{className:"h-4 w-4"}),children:"Students PDF"}),e.jsx(u,{color:"indigo",variant:"outline",size:"sm",onClick:()=>Pe("docx"),icon:e.jsx(T,{className:"h-4 w-4"}),children:"Students DOCX"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end gap-2 mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm",children:"Search student"}),e.jsx("input",{type:"text",className:"input w-full",placeholder:"Enter registration no or name",value:le,onChange:t=>je(t.target.value),onKeyDown:t=>{t.key==="Enter"&&$e()}})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{color:"teal",onClick:$e,disabled:xe,children:xe?"Searching…":"Search"}),e.jsx(u,{color:"rose",variant:"outline",onClick:dt,disabled:xe,children:"Clear"})]})]}),O.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:"Search results"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 mb-1",children:[e.jsxs("div",{className:"text-xs sm:text-sm text-gray-400",children:["Showing ",e.jsx("span",{className:"font-medium text-gray-200",children:Re.length}),O.length>50&&!Z&&e.jsxs(e.Fragment,{children:[" ","of ",e.jsx("span",{className:"font-medium",children:O.length}),e.jsx("span",{className:"ml-1 text-[10px] uppercase tracking-wider px-2 py-0.5 rounded-full bg-slate-700/60 border border-white/10",children:"Latest"})]}),Z&&O.length>50&&e.jsx("span",{className:"ml-2 text-[10px] uppercase tracking-wider px-2 py-0.5 rounded-full bg-gradient-to-r from-cyan-500/20 to-violet-500/20 border border-cyan-400/30 text-cyan-200",children:"All"})]}),O.length>50&&e.jsx("div",{className:"flex gap-2",children:Z?e.jsx("button",{type:"button",onClick:()=>pe(!1),className:"relative inline-flex items-center gap-2 px-4 py-1.5 rounded-lg text-xs sm:text-sm font-medium bg-slate-800/60 hover:bg-slate-700/70 border border-white/10 text-violet-300 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-violet-400/50",children:"Show Less"}):e.jsxs("button",{type:"button",onClick:()=>pe(!0),className:"relative inline-flex items-center gap-2 px-4 py-1.5 rounded-lg text-xs sm:text-sm font-medium bg-slate-800/60 hover:bg-slate-700/70 border border-white/10 text-cyan-300 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400/50 group overflow-hidden",children:[e.jsx("span",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 bg-gradient-to-r from-cyan-500/10 via-teal-500/10 to-violet-500/10 transition"}),"Show More",e.jsxs("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-cyan-500/20 border border-cyan-400/30 text-cyan-200",children:["+",O.length-50]})]})})]}),e.jsx(L,{maxHeight:"40vh",containerClassName:"scroll-thin",columns:[{key:"registrationNo",title:"Reg No"},{key:"name",title:"Name"},{key:"branch",title:"Branch"},{key:"batchYear",title:"Batch"},{key:"action",title:"Action",render:(t,s)=>e.jsx(u,{color:"indigo",size:"xs",onClick:()=>Me(s.registrationNo),children:"View"})}],data:Re})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"text-xs sm:text-sm text-gray-400",children:["Showing ",e.jsx("span",{className:"font-medium text-gray-200",children:ze.length}),R.length>50&&!Q&&e.jsxs(e.Fragment,{children:[" ","of ",e.jsx("span",{className:"font-medium",children:R.length}),e.jsx("span",{className:"ml-1 text-[10px] uppercase tracking-wider px-2 py-0.5 rounded-full bg-slate-700/60 border border-white/10",children:"Latest"})]}),Q&&R.length>50&&e.jsx("span",{className:"ml-2 text-[10px] uppercase tracking-wider px-2 py-0.5 rounded-full bg-gradient-to-r from-cyan-500/20 to-violet-500/20 border border-cyan-400/30 text-cyan-200",children:"All"})]}),R.length>50&&e.jsx("div",{className:"flex gap-2",children:Q?e.jsx("button",{type:"button",onClick:()=>Le(!1),className:"relative inline-flex items-center gap-2 px-4 py-1.5 rounded-lg text-xs sm:text-sm font-medium bg-slate-800/60 hover:bg-slate-700/70 border border-white/10 text-violet-300 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-violet-400/50",children:"Show Less"}):e.jsxs("button",{type:"button",onClick:()=>Le(!0),className:"relative inline-flex items-center gap-2 px-4 py-1.5 rounded-lg text-xs sm:text-sm font-medium bg-slate-800/60 hover:bg-slate-700/70 border border-white/10 text-cyan-300 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400/50 group overflow-hidden",children:[e.jsx("span",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 bg-gradient-to-r from-cyan-500/10 via-teal-500/10 to-violet-500/10 transition"}),"Show More",e.jsxs("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-cyan-500/20 border border-cyan-400/30 text-cyan-200",children:["+",R.length-50]})]})})]}),e.jsx(L,{maxHeight:"60vh",containerClassName:"scroll-thin",columns:[{key:"registrationNo",title:"Reg No"},{key:"name",title:"Name"},{key:"branch",title:"Branch"},{key:"batchYear",title:"Batch"},{key:"action",title:"Action",render:(t,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{color:"indigo",size:"xs",onClick:()=>Me(s.registrationNo),children:"Details"}),e.jsx(u,{color:"rose",size:"xs",onClick:()=>it(s.id),title:"Delete student",icon:e.jsx(he,{className:"h-4 w-4"}),children:"Delete"})]})}],data:ze})]})}),(a==null?void 0:a.isApproved)&&I.has("security")&&e.jsx("div",{role:"tabpanel",id:"panel-security","aria-labelledby":"tab-security",className:h==="security"?"":"hidden",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"font-semibold",children:"Security Users"})}),e.jsx(L,{maxHeight:"50vh",containerClassName:"scroll-thin",columns:[{key:"registrationNo",title:"Identifier"},{key:"name",title:"Name"},{key:"action",title:"Action",render:(t,s)=>e.jsx(u,{color:"rose",size:"xs",onClick:()=>lt(s.id),title:"Delete security user",icon:e.jsx(he,{className:"h-4 w-4"}),children:"Delete"})}],data:p})]})}),(a==null?void 0:a.isApproved)&&I.has("logs")&&e.jsx("div",{role:"tabpanel",id:"panel-logs","aria-labelledby":"tab-logs",className:h==="logs"?"":"hidden",children:e.jsxs("div",{className:"card space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"From"}),e.jsx("input",{type:"datetime-local",className:"input",value:y.from,onChange:t=>ne({...y,from:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"To"}),e.jsx("input",{type:"datetime-local",className:"input",value:y.to,onChange:t=>ne({...y,to:t.target.value})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{color:"teal",disabled:W,onClick:load,icon:e.jsx(yt,{className:"h-4 w-4"}),children:W?"Loading…":"Filter"}),e.jsx(u,{color:"indigo",disabled:W,onClick:()=>G("pdf","students"),icon:e.jsx(T,{className:"h-4 w-4"}),children:"PDF"}),e.jsx(u,{color:"indigo",variant:"outline",disabled:W,onClick:()=>G("docx","students"),icon:e.jsx(T,{className:"h-4 w-4"}),children:"DOCX"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Show:"}),[{key:"all",label:"All"},{key:"check-in",label:"Check In"},{key:"check-out",label:"Check Out"}].map(t=>e.jsx("button",{type:"button",onClick:()=>qe(t.key),className:`px-3 py-1.5 rounded-full text-xs font-medium border transition ${Y===t.key?"bg-cyan-500/80 border-cyan-300 text-white shadow-sm":"bg-slate-800/60 border-white/10 text-gray-300 hover:bg-slate-700/70"}`,children:t.label},t.key))]}),W?e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[e.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M12 3v3",strokeLinecap:"round"}),e.jsx("path",{d:"M12 18v3",strokeLinecap:"round"}),e.jsx("path",{d:"M3 12h3",strokeLinecap:"round"}),e.jsx("path",{d:"M18 12h3",strokeLinecap:"round"})]}),"Loading data…"]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"text-xs sm:text-sm text-gray-400",children:["Showing ",e.jsx("span",{className:"font-medium text-gray-200",children:Be.length}),f.length>50&&!J&&e.jsxs(e.Fragment,{children:[" ","of ",e.jsx("span",{className:"font-medium",children:f.length}),e.jsx("span",{className:"ml-1 text-[10px] uppercase tracking-wider px-2 py-0.5 rounded-full bg-slate-700/60 border border-white/10",children:"Latest"})]}),J&&f.length>50&&e.jsx("span",{className:"ml-2 text-[10px] uppercase tracking-wider px-2 py-0.5 rounded-full bg-gradient-to-r from-cyan-500/20 to-violet-500/20 border border-cyan-400/30 text-cyan-200",children:"All"})]}),f.length>50&&e.jsx("div",{className:"flex gap-2",children:J?e.jsx("button",{type:"button",onClick:()=>De(!1),className:"relative inline-flex items-center gap-2 px-4 py-1.5 rounded-lg text-xs sm:text-sm font-medium bg-slate-800/60 hover:bg-slate-700/70 border border-white/10 text-violet-300 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-violet-400/50",children:"Show Less"}):e.jsxs("button",{type:"button",onClick:()=>De(!0),className:"relative inline-flex items-center gap-2 px-4 py-1.5 rounded-lg text-xs sm:text-sm font-medium bg-slate-800/60 hover:bg-slate-700/70 border border-white/10 text-cyan-300 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400/50 group overflow-hidden",children:[e.jsx("span",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 bg-gradient-to-r from-cyan-500/10 via-teal-500/10 to-violet-500/10 transition"}),"Show More",e.jsxs("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-cyan-500/20 border border-cyan-400/30 text-cyan-200",children:["+",f.length-50]})]})})]}),e.jsx(L,{maxHeight:"60vh",containerClassName:"scroll-thin",columns:[{key:"registrationNo",title:"Reg No"},{key:"name",title:"Name"},{key:"branch",title:"Branch"},{key:"batchYear",title:"Batch"},{key:"action",title:"Action"},{key:"purpose",title:"Purpose"},{key:"checkInTime",title:"Check-in",render:t=>t?new Date(t).toLocaleString():"-"},{key:"checkOutTime",title:"Check-out",render:t=>t?new Date(t).toLocaleString():"-"}],data:Be})]})]})}),(a==null?void 0:a.isApproved)&&I.has("visitors")&&e.jsx("div",{role:"tabpanel",id:"panel-visitors","aria-labelledby":"tab-visitors",className:h==="visitors"?"":"hidden",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"font-semibold mb-2",children:"Visitor Logs"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(u,{color:"indigo",size:"sm",onClick:()=>G("pdf","visitors"),icon:e.jsx(T,{className:"h-4 w-4"}),children:"PDF"}),e.jsx(u,{color:"indigo",size:"sm",variant:"outline",onClick:()=>G("docx","visitors"),icon:e.jsx(T,{className:"h-4 w-4"}),children:"DOCX"})]}),e.jsx(vt,{})]})}),(a==null?void 0:a.isApproved)&&I.has("maintenance")&&e.jsx("div",{role:"tabpanel",id:"panel-maintenance","aria-labelledby":"tab-maintenance",className:h==="maintenance"?"":"hidden",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-2",children:"Purge Old Data"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Delete student check-in/out logs and visitor logs older than 3 months (or a custom date)."})]}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"Custom cutoff (optional)"}),e.jsx("input",{type:"date",className:"input",value:me,onChange:t=>Ue(t.target.value)})]}),e.jsx(u,{color:"rose",onClick:nt,title:"Permanently delete old data",icon:e.jsx(he,{className:"h-4 w-4"}),children:"Purge Old Data"})]})]})})})]}),_e&&e.jsxs("div",{className:"fixed inset-0 z-[999]",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>ce(!1)}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-[96vw] max-w-5xl max-h-[88vh] overflow-auto bg-white dark:bg-gray-900 rounded-xl shadow-2xl border border-black/10 dark:border-white/10 p-3 sm:p-4",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 dark:border-gray-800 pb-2 sm:pb-3",children:[e.jsx("div",{className:"font-semibold",children:"Student Details"}),e.jsx("button",{type:"button",className:"text-sm px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800",onClick:()=>ce(!1),children:"Close"})]}),e.jsxs("div",{className:"pt-3 space-y-3",children:[Ye&&e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Loading…"}),Se&&e.jsx("div",{className:"text-sm text-red-600",children:Se}),A&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"font-semibold mb-1",children:"Profile"}),e.jsxs("div",{children:["Reg No: ",A.student.registrationNo]}),e.jsxs("div",{children:["Name: ",A.student.name||"-"]}),e.jsxs("div",{children:["Branch: ",A.student.branch||"-"]}),e.jsxs("div",{children:["Batch: ",A.student.batchYear||"-"]}),e.jsxs("div",{className:"mt-1 text-sm",children:["Student UID: ",e.jsx("span",{className:"font-mono",children:A.student.studentUid||"-"})]}),e.jsxs("div",{className:"mt-1 text-sm",children:["PIN: ",e.jsx("span",{className:"font-mono",children:A.student.pinCode||"-"})]})]}),A.student.profilePhotoUrl&&e.jsx("div",{className:"card flex items-center justify-center",children:e.jsx("img",{src:A.student.profilePhotoUrl,alt:"Profile photo",width:"192",height:"192",loading:"lazy",decoding:"async",className:"w-28 h-28 sm:w-36 sm:h-36 md:w-48 md:h-48 object-cover rounded-md"})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"font-semibold mb-2",children:"Check-in/Out Logs"}),e.jsx(L,{maxHeight:"50vh",columns:[{key:"action",title:"Action"},{key:"purpose",title:"Purpose"},{key:"checkInTime",title:"Check-in",render:t=>t?new Date(t).toLocaleString():"-"},{key:"checkOutTime",title:"Check-out",render:t=>t?new Date(t).toLocaleString():"-"}],data:A.logs||[]})]})]})]})]})})]})]})}function vt(){const[l,$]=n.useState([]),[w,M]=n.useState(!0),[g,D]=n.useState(!1),[P,V]=n.useState(!1),[p,F]=n.useState([]),[f,k]=n.useState(0),y=a=>{const m=[];return Array.isArray(a==null?void 0:a.photos)&&a.photos.length&&m.push(...a.photos.map(o=>o==null?void 0:o.url).filter(Boolean)),!m.length&&(a!=null&&a.photoUrl)&&m.push(a.photoUrl),m.slice(0,3)},ne=(a,m=0)=>{const o=Array.isArray(a)?a.filter(Boolean):[];o.length&&(F(o),k(Math.min(Math.max(0,m),o.length-1)),V(!0))},x=()=>{V(!1),F([]),k(0)};n.useEffect(()=>{if(!P)return;const a=m=>{if(m.key==="Escape")return x();m.key==="ArrowLeft"&&k(o=>{const d=p.length||0;return d<=1?o:(o-1+d)%d}),m.key==="ArrowRight"&&k(o=>{const d=p.length||0;return d<=1?o:(o+1)%d})};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[P,p.length]),n.useEffect(()=>{(async()=>{try{const a=await c.get("/admin/visitors");$(a.data),E.saveVisitors(a.data).catch(()=>{})}catch{const a=await E.loadVisitors().catch(()=>[]);$(a)}finally{M(!1)}})()},[]);const X=n.useMemo(()=>g?l:l.slice(0,50),[l,g]);return w?e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[e.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M12 3v3",strokeLinecap:"round"}),e.jsx("path",{d:"M12 18v3",strokeLinecap:"round"}),e.jsx("path",{d:"M3 12h3",strokeLinecap:"round"}),e.jsx("path",{d:"M18 12h3",strokeLinecap:"round"})]}),"Loading visitors…"]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"text-xs sm:text-sm text-gray-400",children:["Showing ",e.jsx("span",{className:"font-medium text-gray-200",children:X.length}),l.length>50&&!g&&e.jsxs(e.Fragment,{children:[" ","of ",e.jsx("span",{className:"font-medium",children:l.length}),e.jsx("span",{className:"ml-1 text-[10px] uppercase tracking-wider px-2 py-0.5 rounded-full bg-slate-700/60 border border-white/10",children:"Latest"})]}),g&&l.length>50&&e.jsx("span",{className:"ml-2 text-[10px] uppercase tracking-wider px-2 py-0.5 rounded-full bg-gradient-to-r from-cyan-500/20 to-violet-500/20 border border-cyan-400/30 text-cyan-200",children:"All"})]}),l.length>50&&e.jsx("div",{className:"flex gap-2",children:g?e.jsx("button",{type:"button",onClick:()=>D(!1),className:"relative inline-flex items-center gap-2 px-4 py-1.5 rounded-lg text-xs sm:text-sm font-medium bg-slate-800/60 hover:bg-slate-700/70 border border-white/10 text-violet-300 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-violet-400/50",children:"Show Less"}):e.jsxs("button",{type:"button",onClick:()=>D(!0),className:"relative inline-flex items-center gap-2 px-4 py-1.5 rounded-lg text-xs sm:text-sm font-medium bg-slate-800/60 hover:bg-slate-700/70 border border-white/10 text-cyan-300 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400/50 group overflow-hidden",children:[e.jsx("span",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 bg-gradient-to-r from-cyan-500/10 via-teal-500/10 to-violet-500/10 transition"}),"Show More",e.jsxs("span",{className:"text-[11px] px-1.5 py-0.5 rounded bg-cyan-500/20 border border-cyan-400/30 text-cyan-200",children:["+",l.length-50]})]})})]}),e.jsx(L,{maxHeight:"50vh",columns:[{key:"photos",title:"Photos",render:(a,m)=>{const o=y(m);if(!o.length)return"-";const d=o[0],ie=o.length-1;return e.jsxs("button",{type:"button",onClick:()=>ne(o,0),title:o.length>1?`View photos (${o.length})`:"View photo",className:"group relative",children:[e.jsx("img",{src:d,alt:"Visitor",width:"40",height:"40",loading:"lazy",decoding:"async",className:"h-10 w-10 rounded object-cover border border-white/10 group-hover:ring-2 group-hover:ring-cyan-400/50"}),ie>0&&e.jsxs("span",{className:"absolute -right-2 -top-2 text-[10px] px-1.5 py-0.5 rounded-full bg-gray-900/95 text-cyan-200 border border-cyan-400/30 shadow",children:["+",ie]})]})}},{key:"name",title:"Name"},{key:"vehicleNo",title:"Vehicle"},{key:"purpose",title:"Purpose"},{key:"entryTime",title:"Entry",render:a=>new Date(a).toLocaleString()},{key:"exitTime",title:"Exit",render:a=>a?new Date(a).toLocaleString():"-"}],data:X}),P&&e.jsxs("div",{className:"fixed inset-0 z-[9999]",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:x}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-3 sm:p-6",onClick:x,children:e.jsxs("div",{className:"relative",onClick:a=>a.stopPropagation(),children:[e.jsxs("button",{type:"button","aria-label":"Close",className:"group absolute -top-3 -right-3 sm:top-0 sm:right-0 translate-y-[-50%] sm:translate-y-0 px-0.5 py-0.5 rounded-full",onClick:x,children:[e.jsx("span",{className:"absolute inset-0 rounded-full bg-gradient-to-tr from-emerald-500/40 to-sky-500/40 blur-md opacity-0 group-hover:opacity-100 transition"}),e.jsx("span",{className:"relative inline-flex h-10 w-10 items-center justify-center rounded-full bg-gray-900/90 text-white border border-white/10 shadow-lg ring-1 ring-white/10 hover:scale-105 transition",children:e.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsxs("div",{className:"w-[96vw] max-w-3xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"text-xs text-gray-200",children:["Photo ",f+1," of ",p.length]}),p.length>1&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",className:"px-3 py-1.5 rounded bg-slate-800/70 border border-white/10 text-gray-100 hover:bg-slate-700/70",onClick:()=>k(a=>(a-1+p.length)%p.length),children:"Prev"}),e.jsx("button",{type:"button",className:"px-3 py-1.5 rounded bg-slate-800/70 border border-white/10 text-gray-100 hover:bg-slate-700/70",onClick:()=>k(a=>(a+1)%p.length),children:"Next"})]})]}),e.jsx("img",{src:p[f],alt:"Visitor full",loading:"lazy",decoding:"async",className:"max-h-[75vh] w-full object-contain rounded-lg border border-white/10 bg-black/20"}),p.length>1&&e.jsx("div",{className:"mt-3 flex gap-2 justify-center flex-wrap",children:p.map((a,m)=>e.jsx("button",{type:"button",onClick:()=>k(m),className:`rounded border ${m===f?"border-cyan-400 ring-2 ring-cyan-400/40":"border-white/10"} overflow-hidden`,title:`Photo ${m+1}`,children:e.jsx("img",{src:a,alt:`Thumb ${m+1}`,className:"h-14 w-14 object-cover",loading:"lazy",decoding:"async"})},a))})]})]})})]})]})}function fe({onClick:l}){return e.jsx(u,{color:"teal",size:"xs",onClick:l,icon:e.jsx(Ve,{className:"h-4 w-4"}),children:"Approve"})}function ve({onClick:l}){return e.jsx(u,{color:"rose",size:"xs",onClick:l,icon:e.jsx(Ie,{className:"h-4 w-4"}),children:"Reject"})}const Ee={teal:{solid:"from-cyan-500 via-teal-500 to-emerald-500 text-white shadow-cyan-500/30",outline:"text-cyan-300 border border-cyan-400/30 hover:bg-cyan-500/10"},rose:{solid:"from-rose-500 via-fuchsia-500 to-pink-500 text-white shadow-rose-500/30",outline:"text-rose-300 border border-rose-400/30 hover:bg-rose-500/10"},amber:{solid:"from-amber-500 via-orange-500 to-yellow-500 text-white shadow-amber-500/30",outline:"text-amber-300 border border-amber-400/30 hover:bg-amber-500/10"},indigo:{solid:"from-indigo-500 via-violet-500 to-fuchsia-500 text-white shadow-indigo-500/30",outline:"text-violet-300 border border-violet-400/30 hover:bg-violet-500/10"}};function u({children:l,color:$="teal",variant:w="solid",size:M="md",icon:g,className:D="",...P}){const V={xs:"text-xs px-2.5 py-1.5",sm:"text-sm px-3 py-1.5",md:"text-sm px-4 py-2",lg:"text-base px-5 py-2.5"},p="relative inline-flex items-center gap-1.5 rounded-lg font-medium tracking-wide focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-gray-900 transition disabled:opacity-50 disabled:cursor-not-allowed",F=Ee[$]||Ee.teal,f=w==="solid"?`bg-gradient-to-r ${F.solid} hover:brightness-110 shadow-sm`:`bg-slate-800/40 hover:bg-slate-700/50 backdrop-blur border ${F.outline}`;return e.jsxs("button",{type:"button",className:`${p} ${V[M]} ${f} ${D}`,...P,children:[g&&e.jsx("span",{className:"relative z-10",children:g}),e.jsx("span",{className:"relative z-10",children:l})]})}function Ve({className:l=""}){return e.jsx("svg",{className:l,viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M16.704 5.29a1 1 0 010 1.42l-7.5 7.5a1 1 0 01-1.414 0l-3-3a1 1 0 111.414-1.42l2.293 2.293 6.793-6.793a1 1 0 011.414 0z",clipRule:"evenodd"})})}function Ie({className:l=""}){return e.jsx("svg",{className:l,viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}function he({className:l=""}){return e.jsxs("svg",{className:l,viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:[e.jsx("path",{d:"M6 7a1 1 0 011 1v7a1 1 0 11-2 0V8a1 1 0 011-1zm4 0a1 1 0 011 1v7a1 1 0 11-2 0V8a1 1 0 011-1zm4 0a1 1 0 011 1v7a1 1 0 11-2 0V8a1 1 0 011-1z"}),e.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2h8a2 2 0 012 2v1H4V5zm2-1a1 1 0 00-1 1v1h10V5a1 1 0 00-1-1H6z",clipRule:"evenodd"})]})}function T({className:l=""}){return e.jsxs("svg",{className:l,viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:[e.jsx("path",{d:"M9 2a1 1 0 012 0v8.586l2.293-2.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4A1 1 0 016.707 8.293L9 10.586V2z"}),e.jsx("path",{d:"M3 14a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2z"})]})}function yt({className:l=""}){return e.jsx("svg",{className:l,viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{d:"M3 5a2 2 0 012-2h10a2 2 0 012 2v1a2 2 0 01-.586 1.414L12 11.828V16a1 1 0 01-1.447.894l-2-1A1 1 0 018 15v-3.172L3.586 7.414A2 2 0 013 6V5z"})})}function _({icon:l,label:$,value:w,active:M,onClick:g,badge:D}){return e.jsxs("button",{id:`tab-${w}`,role:"tab","aria-selected":M,"aria-controls":`panel-${w}`,type:"button",onClick:g,className:`inline-flex items-center justify-center gap-2 px-2.5 sm:px-4 py-1.5 rounded-lg text-xs sm:text-sm font-medium border transition w-full md:w-auto ${M?"bg-slate-800/60 text-white border-white/10 shadow":"bg-transparent text-gray-600 dark:text-gray-300 hover:bg-slate-800/30 border-transparent"}`,children:[l,e.jsx("span",{children:$}),D>0&&e.jsx("span",{className:"ml-1 text-[10px] px-1.5 py-0.5 rounded-full bg-rose-500/20 text-rose-200 border border-rose-400/30",children:D})]})}export{Ct as default};
