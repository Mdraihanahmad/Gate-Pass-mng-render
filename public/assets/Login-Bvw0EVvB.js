import{r as s,u as v,a as w,j as e,L as g}from"./index-BtPyl2j0.js";function k(){const[a,h]=s.useState("student"),[i,p]=s.useState(""),[n,b]=s.useState(""),[d,l]=s.useState(""),[c,f]=s.useState(!1),o=v(),{login:y,loading:u}=w(),j=async t=>{var m,x;t.preventDefault(),l("");try{const r=await y(i,n,a);r.role==="admin"?o("/admin"):r.role==="security"?o("/security"):o("/student")}catch(r){l(((x=(m=r.response)==null?void 0:m.data)==null?void 0:x.message)||"Login failed")}};return e.jsxs("div",{className:"relative min-h-screen overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 -z-10 bg-gradient-to-br from-indigo-600 via-purple-600 to-rose-500 animate-gradient"}),e.jsx("div",{className:"blob absolute top-12 -left-10 w-56 h-56 bg-pink-400/40 rounded-full"}),e.jsx("div",{className:"blob absolute bottom-16 right-10 w-72 h-72 bg-indigo-400/40 rounded-full",style:{animationDelay:"2s"}}),e.jsx("div",{className:"blob absolute top-1/3 right-1/3 w-64 h-64 bg-emerald-400/40 rounded-full",style:{animationDelay:"4s"}}),e.jsx("div",{className:"flex items-center justify-center p-6",children:e.jsxs("div",{className:"glass auth-card max-w-md w-full mx-auto rounded-2xl p-6 shadow-xl neon",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-extrabold text-gray-900/90 dark:text-white tracking-tight",children:"Welcome back"}),e.jsx("p",{className:"text-sm text-gray-700/80 dark:text-gray-300/80",children:"Log in to manage gate passes"})]}),d&&e.jsx("div",{className:"mb-3 rounded-md border border-rose-300 bg-rose-50/80 text-rose-800 px-3 py-2 text-sm",children:d}),e.jsx("div",{className:"grid grid-cols-3 gap-2 bg-gray-200/60 dark:bg-gray-800/70 rounded-lg p-1 mb-4",children:["student","security","admin"].map(t=>e.jsx("button",{type:"button",onClick:()=>h(t),className:`text-sm font-medium rounded-md py-2 transition ${a===t?"bg-white dark:bg-gray-900 text-gray-900 dark:text-white shadow":"text-gray-700/80 dark:text-gray-300/80 hover:bg-white/70 dark:hover:bg-gray-900/50"}`,children:t[0].toUpperCase()+t.slice(1)},t))}),e.jsxs("form",{className:"space-y-4",onSubmit:j,children:[e.jsx("div",{className:"relative",children:e.jsx("input",{className:"input",placeholder:a==="student"?"Registration No":"Name",value:i,onChange:t=>p(t.target.value),autoComplete:a==="student"?"username":"name"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"input pr-10",placeholder:"Password",type:c?"text":"password",value:n,onChange:t=>b(t.target.value),autoComplete:"current-password"}),e.jsx("button",{type:"button",onClick:()=>f(t=>!t),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 cursor-pointer","aria-label":c?"Hide password":"Show password",children:e.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5","aria-hidden":"true",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.644C3.423 7.51 7.36 5 12 5c4.64 0 8.577 2.51 9.964 6.678.07.194.07.45 0 .644C20.577 16.49 16.64 19 12 19c-4.64 0-8.577-2.51-9.964-6.678z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),e.jsx("button",{disabled:u,className:"w-full inline-flex items-center justify-center rounded-lg bg-gradient-to-r from-indigo-600 via-fuchsia-600 to-rose-600 text-white font-semibold py-2.5 shadow-lg hover:opacity-95 active:opacity-90 transition disabled:opacity-60",children:u?e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsxs("svg",{className:"w-4 h-4 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",strokeOpacity:"0.25",strokeWidth:"4"}),e.jsx("path",{d:"M4 12a8 8 0 018-8",strokeWidth:"4",strokeLinecap:"round"})]}),"Logging inâ€¦"]}):"Login"})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-800/80 dark:text-gray-200/80",children:[e.jsx(g,{to:"/forgot-password",className:"font-semibold underline decoration-indigo-500/70 decoration-2 underline-offset-4 mr-2",children:"Forgot password?"}),"New here? ",e.jsx(g,{to:"/signup",className:"font-semibold underline decoration-rose-500/70 decoration-2 underline-offset-4",children:"Create an account"})]})]})})]})}export{k as default};
