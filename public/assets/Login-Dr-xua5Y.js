import{c as d,r as t,u as S,a as R,j as e,L as m}from"./index-C5_jvaoZ.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=d("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=d("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=d("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=d("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);function I(){const[n,i]=t.useState("student"),[x,o]=t.useState("pick"),[h,j]=t.useState(""),[p,k]=t.useState(""),[g,f]=t.useState(""),[b,v]=t.useState(!1),y=t.useRef(null),u=S(),{login:N,loading:w}=R(),L=async s=>{var a,r;s.preventDefault(),f("");try{const l=await N(h,p,n);l.role==="admin"?u("/admin"):l.role==="security"?u("/security"):u("/student")}catch(l){f(((r=(a=l.response)==null?void 0:a.data)==null?void 0:r.message)||"Login failed");try{const c=y.current;c&&(c.classList.remove("shake"),c.offsetWidth,c.classList.add("shake"))}catch{}}};t.useEffect(()=>{const s=a=>{x==="pick"&&(a.key==="1"&&(i("student"),o("form")),a.key==="2"&&(i("security"),o("form")),a.key==="3"&&(i("admin"),o("form")))};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[x]);const C=t.useMemo(()=>[{key:"student",label:"Student",icon:A,color:"from-sky-500 to-cyan-500",desc:"Access your gate pass"},{key:"security",label:"Security",icon:E,color:"from-amber-500 to-orange-500",desc:"Security dashboard login"},{key:"admin",label:"Admin",icon:z,color:"from-violet-500 to-fuchsia-500",desc:"Admin dashboard login"}],[]);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-slate-900 to-slate-950 text-gray-100",children:[e.jsx("div",{className:"relative text-white pt-10 pb-16 rounded-b-[28px] header-shadow",style:{background:"linear-gradient(135deg, #3b0d6d 0%, #5b21b6 70%)"},children:e.jsx("div",{className:"max-w-3xl mx-auto flex flex-col items-center",children:e.jsx("img",{src:"/icons/icon-192.png",alt:"App logo",className:"w-20 h-20 rounded-full bg-white shadow-md border border-white/70 object-contain p-1"})})}),e.jsx("div",{className:"-mt-12 px-4 sm:px-6",children:e.jsx("div",{className:"max-w-4xl mx-auto bg-slate-800/80 backdrop-blur rounded-2xl fancy-shadow border border-white/10 p-5 sm:p-6",children:x==="pick"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Choose Your Role"}),e.jsx("div",{className:"text-sm text-gray-300",children:"Tap to continue"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 animate-slide-up",children:C.map(s=>{const a=s.icon;return e.jsxs("button",{type:"button",onClick:()=>{i(s.key),o("form")},className:"role-card group flex flex-col items-center gap-3 p-4 rounded-xl bg-slate-900/40 border border-white/10 hover:bg-slate-900/60 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-violet-400/60 focus-visible:ring-offset-slate-900",onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),i(s.key),o("form"))},tabIndex:0,"aria-label":`Login as ${s.label}`,children:[e.jsx("span",{className:`role-circle w-28 h-28 sm:w-32 sm:h-32 rounded-full bg-gradient-to-br ${s.color} text-white flex items-center justify-center shadow-2xl pulse-ring`,title:`${s.label} login`,children:e.jsx(a,{className:"w-12 h-12 drop-shadow"})}),e.jsx("span",{className:"text-base font-semibold text-white",children:s.label}),e.jsx("span",{className:"text-xs text-gray-300 text-center",children:s.desc}),s.key!=="student"&&e.jsx("span",{className:"text-[10px] uppercase tracking-wide px-2 py-0.5 rounded-full bg-white/10 text-white/90 border border-white/20",children:"Staff"})]},s.key)})}),e.jsxs("div",{className:"mt-5 text-center text-xs text-gray-300",children:["Looking for signup? ",e.jsx(m,{to:"/signup",className:"font-semibold underline decoration-rose-400/80 underline-offset-4",children:"Create an account"})]})]}):e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("button",{type:"button",onClick:()=>o("pick"),className:"inline-flex items-center gap-2 text-sm text-gray-300 hover:text-white mb-3",children:[e.jsx(M,{className:"w-4 h-4"})," Change role"]}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("h1",{className:"text-xl font-bold text-white",children:["Login as ",n[0].toUpperCase()+n.slice(1)]}),e.jsx("p",{className:"text-sm text-gray-300",children:"Enter your credentials to continue"})]}),g&&e.jsx("div",{className:"mb-3 rounded-md border border-rose-400/40 bg-rose-500/10 text-rose-200 px-3 py-2 text-sm",role:"alert",children:g}),e.jsxs("form",{className:"space-y-4",onSubmit:L,ref:y,children:[e.jsx("div",{className:"relative",children:e.jsx("input",{className:"input bg-slate-900/40 border-white/10",placeholder:n==="student"?"Registration No":"Name",value:h,onChange:s=>j(s.target.value),autoComplete:n==="student"?"username":"name"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"input pr-10 bg-slate-900/40 border-white/10",placeholder:"Password",type:b?"text":"password",value:p,onChange:s=>k(s.target.value),autoComplete:"current-password"}),e.jsx("button",{type:"button",onClick:()=>v(s=>!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-white cursor-pointer","aria-label":b?"Hide password":"Show password",children:e.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5","aria-hidden":"true",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.644C3.423 7.51 7.36 5 12 5c4.64 0 8.577 2.51 9.964 6.678.07.194.07.45 0 .644C20.577 16.49 16.64 19 12 19c-4.64 0-8.577-2.51-9.964-6.678z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),e.jsx("button",{disabled:w,className:"w-full inline-flex items-center justify-center rounded-lg bg-gradient-to-r from-indigo-600 via-fuchsia-600 to-rose-600 text-white font-semibold py-2.5 shadow-lg hover:brightness-110 active:brightness-95 transition disabled:opacity-60",children:w?e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsxs("svg",{className:"w-4 h-4 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",strokeOpacity:"0.25",strokeWidth:"4"}),e.jsx("path",{d:"M4 12a8 8 0 018-8",strokeWidth:"4",strokeLinecap:"round"})]}),"Logging inâ€¦"]}):"Login"})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-300",children:[e.jsx(m,{to:"/forgot-password",className:"font-semibold underline decoration-indigo-400/80 decoration-2 underline-offset-4 mr-2",children:"Forgot password?"}),"New here? ",e.jsx(m,{to:"/signup",className:"font-semibold underline decoration-rose-400/80 decoration-2 underline-offset-4",children:"Create an account"})]})]})})})]})}export{I as default};
