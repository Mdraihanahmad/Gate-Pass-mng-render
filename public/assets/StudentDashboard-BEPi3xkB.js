const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/StudentCharts-DLHobMZx.js","assets/vendor-CFsy__N8.js","assets/vendor-recharts-DuiZsPwZ.js"])))=>i.map(i=>d[i]);
import{u as ge,a as k,_ as M}from"./index-ClRHiWvm.js";import{r as i,ap as e,aq as q}from"./vendor-CFsy__N8.js";import{o as C}from"./offline-BGNqmuom.js";import{Q as pe,H as be,k as fe,X as K}from"./vendor-icons-DxUJAirC.js";import"./vendor-router-CySAd55F.js";import"./vendor-axios-NIGUFBhG.js";function ye(s=[]){const c={},l=new Date;l.setHours(0,0,0,0);for(let a=6;a>=0;a--){const m=new Date(l.getTime()-a*864e5).toISOString().slice(0,10);c[m]={date:m.slice(5),in:0,out:0}}for(const a of s){const n=new Date(a.timestamp||a.checkInTime||a.checkOutTime);if(isNaN(n))continue;const m=n.toISOString().slice(0,10);c[m]&&(a.action==="check-in"&&c[m].in++,a.action==="check-out"&&c[m].out++)}return Object.values(c)}function ve(s=[]){const c=Date.now()-2592e6,l={};for(const a of s){const n=new Date(a.timestamp||a.checkInTime||a.checkOutTime).getTime();if(isNaN(n)||n<c)continue;const m=(a.purpose||"Other").trim()||"Other";l[m]=(l[m]||0)+1}return Object.entries(l).map(([a,n])=>({name:a,value:n}))}function je(s=[]){const c=Date.now()-12096e5,l=Array.from({length:24},(a,n)=>({hour:n,count:0}));for(const a of s){const n=new Date(a.timestamp||a.checkInTime||a.checkOutTime),m=n.getTime();isNaN(m)||m<c||l[n.getHours()].count++}return l}function we(s=[]){const c=new Set;for(const x of s){const u=new Date(x.timestamp||x.checkInTime||x.checkOutTime);if(isNaN(u))continue;const p=u.toISOString().slice(0,10);c.add(p)}let l=0;const a=new Date;a.setHours(0,0,0,0);for(let x=0;;x++){const p=new Date(a.getTime()-x*864e5).toISOString().slice(0,10);if(c.has(p))l++;else break}const n=new Date(a);n.setDate(a.getDate()-a.getDay());const m=new Date(a.getFullYear(),a.getMonth(),1);let D=0,f=0;for(const x of s){const u=new Date(x.timestamp||x.checkInTime||x.checkOutTime);isNaN(u)||(u>=n&&D++,u>=m&&f++)}return{streak:l,week:D,month:f}}const Ne=i.lazy(()=>M(()=>import("./StudentCharts-DLHobMZx.js"),__vite__mapDeps([0,1,2])).then(s=>({default:s.WeeklyActivityChart}))),ke=i.lazy(()=>M(()=>import("./StudentCharts-DLHobMZx.js"),__vite__mapDeps([0,1,2])).then(s=>({default:s.PurposeDonut}))),Ce=i.lazy(()=>M(()=>import("./StudentCharts-DLHobMZx.js"),__vite__mapDeps([0,1,2])).then(s=>({default:s.HourlyDensityArea})));function qe(){const[s,c]=i.useState(null),[l,a]=i.useState([]),[n,m]=i.useState(null),[D,f]=i.useState(!1),[x,u]=i.useState(Date.now()),[p,G]=i.useState(""),[j,J]=i.useState("all"),[y,w]=i.useState(!1),[v,N]=i.useState(!1),[S,b]=i.useState(""),[X,E]=i.useState(!1),{user:De}=ge(),_=i.useRef(null),z=i.useRef(null),Y=i.useRef(null),[T,ee]=i.useState("qr"),A=(t,r)=>{t&&t.current&&(ee(r),t.current.scrollIntoView({behavior:"smooth",block:"start"}))};i.useEffect(()=>{(async()=>{try{const{data:r}=await k.get("/students/me");c(r),b(""),C.saveStudentProfile(r).catch(()=>{})}catch{let d=null;try{d=await C.loadStudentProfile()}catch{}if(d)c(d),b("Online fetch failed — showing cached profile");else try{const o=localStorage.getItem("user"),h=o?JSON.parse(o):null;h?(c({name:h.name||"Student",registrationNo:h.registrationNo||"—",branch:h.branch||"-",batchYear:h.batchYear||"-",isApproved:!!h.isApproved,pinCode:h.pinCode,qrCodeDataUrl:h.qrCodeDataUrl,profilePhotoUrl:h.profilePhotoUrl}),b("Unable to reach server — limited info shown")):b("Unable to load profile. Please try again.")}catch{b("Unable to load profile. Please try again.")}}})()},[]),i.useEffect(()=>{if(y||v){const t=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=t}}},[y,v]),i.useEffect(()=>{const t=r=>{r.key==="Escape"&&(y&&w(!1),v&&N(!1))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[y,v]);const P=i.useCallback(async()=>{try{f(!0);const t=(await k.get("/students/logs")).data;a(t),m(new Date),C.saveStudentLogs(t).catch(()=>{})}catch{const r=await C.loadStudentLogs().catch(()=>[]);r.length?a(r):a([])}finally{f(!1)}},[]);i.useEffect(()=>{P();const t=()=>P();window.addEventListener("focus",t);const r=setInterval(P,3e4),d=setInterval(()=>u(Date.now()),3e4);return()=>{window.removeEventListener("focus",t),clearInterval(r),clearInterval(d)}},[]);const U=t=>{if(!t)return"";const r=Math.max(0,Math.floor((Date.now()-new Date(t).getTime())/1e3));if(r<60)return`${r}s ago`;const d=Math.floor(r/60);if(d<60)return`${d}m ago`;const o=Math.floor(d/60);return o<24?`${o}h ago`:`${Math.floor(o/24)}d ago`},F=["Small steps done consistently create big change.","Progress beats perfection—show up and move forward.","Discipline turns goals into daily habits.","Your future self is built by today’s choices.","Momentum starts when excuses stop.","Dream big, act small, repeat daily.","Growth lives just beyond your comfort zone.","You don’t need more time, just more focus.","The best way to begin is to begin.","Every effort compounds—keep going.","Consistency is a superpower—use it.","Win the day; the week will follow.","Your pace is enough if you persist.","Direction matters more than speed.","Tiny improvements beat sudden bursts.","Make it a habit, not a hurdle."],H=["Suraj","Faizan","Raihan","Tarique"],O=new Date,te=`${O.getFullYear()}-${O.getMonth()+1}-${O.getDate()}`,Q=(t=>{let r=0;for(let d=0;d<t.length;d++)r=r*31+t.charCodeAt(d)|0;return Math.abs(r)})(te),se=F[Q%F.length],ae=H[(Q*7+3)%H.length],V=i.useMemo(()=>{const t=p.trim().toLowerCase();return l.filter(r=>{const d=j==="all"||r.action===j,o=!t||r.action&&r.action.toLowerCase().includes(t)||r.purpose&&r.purpose.toLowerCase().includes(t);return d&&o})},[l,j,p]);if(!s)return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"rounded border border-amber-300 bg-amber-50 text-amber-900 p-4 max-w-xl",children:[e.jsx("div",{className:"font-semibold mb-1",children:S||"Loading your profile…"}),e.jsx("button",{className:"mt-2 inline-flex items-center gap-2 rounded-md bg-sky-600 px-3 py-1.5 text-sm text-white hover:bg-sky-700",onClick:()=>{(async()=>{try{const{data:t}=await k.get("/students/me");c(t),b("")}catch{b("Still unable to load profile. Check connection or try again later.")}})()},children:"Retry"})]})});const g=l&&l.length?l[0]:null,Z=g?g.timestamp||g.checkInTime||g.checkOutTime:null,$=(g==null?void 0:g.action)==="check-in",re=g?$?"Inside campus":"Outside campus":"No activity yet",ie=g?$?"bg-emerald-500/15 text-emerald-700 dark:text-emerald-300 border border-emerald-400/20":"bg-sky-500/15 text-sky-700 dark:text-sky-300 border border-sky-400/20":"bg-gray-500/15 text-gray-700 dark:text-gray-300 border border-gray-400/20",le=l.filter(t=>t.action==="check-in").length,oe=l.filter(t=>t.action==="check-out").length,ne=!s.isApproved&&s.requestedApproval?1:0,ce=ye(l),de=ve(l),me=je(l),R=we(l),he=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],B=(()=>{const t=new Date;return Array.from({length:7},(r,d)=>{const o=new Date(t);o.setHours(0,0,0,0),o.setDate(t.getDate()-(6-d));const h=l.some(I=>{const W=I.checkInTime||I.timestamp||I.checkOutTime;if(!W)return!1;const L=new Date(W);return L.getFullYear()===o.getFullYear()&&L.getMonth()===o.getMonth()&&L.getDate()===o.getDate()}),ue=o.getFullYear()===t.getFullYear()&&o.getMonth()===t.getMonth()&&o.getDate()===t.getDate();return{key:`${o.getFullYear()}-${o.getMonth()}-${o.getDate()}`,label:he[o.getDay()],active:h,isToday:ue}})})(),xe=B.filter(t=>t.active).length;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative min-h-screen overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 -z-10 bg-gradient-to-br from-indigo-600 via-sky-500 to-emerald-500 animate-gradient"}),e.jsx("div",{className:"blob absolute bottom-10 right-6 w-72 h-72 bg-cyan-400/40 rounded-full",style:{animationDelay:"2s"}}),e.jsx("div",{className:"blob absolute top-1/3 left-1/2 w-64 h-64 bg-amber-400/40 rounded-full",style:{animationDelay:"4s"}}),e.jsxs("div",{className:"p-4 pb-20 md:pb-6 md:p-6 max-w-5xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>s.profilePhotoUrl&&w(!0),className:"relative group","aria-label":"View profile photo",title:"Click to view",children:[e.jsx("img",{src:s.profilePhotoUrl||"https://placehold.co/128x128?text=Avatar",alt:"Profile",width:"80",height:"80",loading:"lazy",decoding:"async",className:"w-20 h-20 rounded-full object-cover border border-white/50 shadow cursor-zoom-in group-hover:scale-[1.02] transition-transform"}),s.profilePhotoUrl&&e.jsx("span",{className:"pointer-events-none absolute -bottom-2 left-1/2 -translate-x-1/2 text-[10px] text-white/80 bg-black/40 px-2 py-0.5 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to zoom"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("div",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:s.name||"Student"}),e.jsx("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs ${ie}`,children:re}),Z&&e.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["• ",U(Z)]})]}),e.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:s.registrationNo})]})]}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Student Dashboard"}),S&&e.jsx("div",{className:"rounded border border-amber-300 bg-amber-50 text-amber-900 p-3",children:S}),!s.isApproved&&!s.requestedApproval&&e.jsxs("div",{className:"rounded border border-red-200 bg-red-50 text-red-800 p-4 flex items-start gap-3",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6 mt-0.5",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm.75 6a.75.75 0 0 0-1.5 0v5.25a.75.75 0 0 0 1.5 0V8.25Zm-1.5 7.5a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5h-1.5Z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold",children:"Application was rejected"}),e.jsx("div",{className:"text-sm mb-2",children:"Your application was rejected by an admin. You can send the request again."}),e.jsx("button",{className:"btn",onClick:async()=>{await k.post("/students/request-approval"),c({...s,requestedApproval:!0})},children:"Send request again"})]})]}),!s.isApproved&&s.requestedApproval&&e.jsxs("div",{className:"rounded border border-blue-200 bg-blue-50 text-blue-800 p-4 flex items-start gap-3",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6 mt-0.5",children:e.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm9.75-6a.75.75 0 0 0-.75.75v6a.75.75 0 0 0 1.5 0v-6a.75.75 0 0 0-.75-.75Zm0 12a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Application submitted"}),e.jsx("div",{className:"text-sm",children:"Your application has been sent to the admin. Please wait for approval. You’ll get your QR and PIN once approved."})]})]}),e.jsxs("div",{className:"card student-glass border border-white/30 dark:border-white/10 mt-4",children:[e.jsx("div",{className:"font-semibold",children:s.name}),e.jsxs("div",{children:["Registration: ",s.registrationNo]}),e.jsxs("div",{children:["Branch: ",s.branch]}),e.jsxs("div",{children:["Batch Year: ",s.batchYear]}),e.jsxs("div",{className:"mt-2 text-sm",children:["6-digit PIN (fallback): ",e.jsx("span",{className:"font-mono text-lg",children:s.pinCode||"-"})]})]}),s.qrCodeDataUrl&&e.jsxs("div",{ref:_,className:"card student-glass border border-white/30 dark:border-white/10 mt-4",children:[e.jsx("div",{className:"font-semibold mb-2",children:"Your QR Code"}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("button",{type:"button",onClick:()=>N(!0),className:"inline-block group","aria-label":"View QR code",title:"Click to view",children:e.jsx("div",{className:"p-3 rounded-md bg-white inline-block",children:e.jsx("img",{alt:"qr",loading:"lazy",decoding:"async",width:"192",height:"192",className:"w-40 h-40 sm:w-48 sm:h-48 cursor-zoom-in",style:{imageRendering:"pixelated"},src:s.qrCodeDataUrl})})}),e.jsx("button",{type:"button",onClick:()=>E(!0),className:"inline-flex items-center gap-2 rounded-md px-3 py-2 text-sm bg-slate-800/60 text-gray-100 border border-white/10 hover:bg-slate-700/70",title:"Open ultra-bright QR",children:"Max Brightness"})]}),e.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"Show this to security for check-in/out"})]}),e.jsxs("div",{className:"card student-glass border border-white/30 dark:border-white/10 mt-4",children:[e.jsx("div",{className:"flex items-center justify-end mt-8",children:e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:n?`Last updated: ${U(n)}`:"Loading..."})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"card student-glass flex flex-col items-center text-center py-6 shadow-lg transition-transform hover:scale-105",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 animate-bounce",children:le}),e.jsx("div",{className:"mt-1 text-sm text-gray-700 dark:text-gray-200",children:"Total Check-ins"})]}),e.jsxs("div",{className:"card student-glass flex flex-col items-center text-center py-6 shadow-lg transition-transform hover:scale-105",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600 animate-pulse",children:oe}),e.jsx("div",{className:"mt-1 text-sm text-gray-700 dark:text-gray-200",children:"Total Check-outs"})]}),e.jsxs("div",{className:"card student-glass flex flex-col items-center text-center py-6 shadow-lg transition-transform hover:scale-105",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-500",children:ne}),e.jsx("div",{className:"mt-1 text-sm text-gray-700 dark:text-gray-200",children:"Pending Requests"})]})]}),e.jsxs("div",{ref:z,className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"card student-glass py-4 px-5 border border-white/30 dark:border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-200/90",children:"This week at a glance"}),e.jsxs("div",{className:"mt-1 text-xs text-gray-300/80",children:[xe,"/7 days with activity"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-[11px] uppercase tracking-wide text-emerald-200/80",children:"Current streak"}),e.jsxs("div",{className:"text-2xl font-semibold text-emerald-400",children:[R.streak||0,"d"]})]})]}),e.jsx("div",{className:"mt-4 flex items-end justify-between gap-1",children:B.map(t=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsx("div",{className:"h-7 w-7 rounded-full flex items-center justify-center text-[10px] font-semibold "+(t.active?"bg-emerald-400 text-emerald-950 shadow-md shadow-emerald-500/40 border border-emerald-300":"bg-slate-900/40 text-slate-300 border border-slate-600/60")+(t.isToday?" ring-2 ring-cyan-300/80":""),children:t.label[0]}),e.jsx("div",{className:"text-[10px] tracking-wide "+(t.isToday?"text-cyan-200 font-semibold":"text-slate-200/80"),children:t.label})]},t.key))})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"card student-glass flex items-center justify-between py-3 px-4 border border-white/30 dark:border-white/10",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-300/90",children:"This week visits"}),e.jsx("div",{className:"text-xl font-semibold text-sky-300",children:R.week||0})]}),e.jsx("svg",{className:"h-8 w-8 text-sky-300",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M19 4H5a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3Zm-8 10H7v-2h4v2Zm6-4H7V8h10v2Z"})})]}),e.jsxs("div",{className:"card student-glass flex items-center justify-between py-3 px-4 border border-white/30 dark:border-white/10",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-300/90",children:"This month visits"}),e.jsx("div",{className:"text-xl font-semibold text-amber-300",children:R.month||0})]}),e.jsx("svg",{className:"h-8 w-8 text-amber-300",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M7 4V2h2v2h6V2h2v2h4v2H3V4h4Zm14 4v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8h18ZM7 12h5v5H7v-5Z"})})]})]})]}),e.jsx(i.Suspense,{fallback:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx("div",{className:"card h-48 animate-pulse bg-white/40 dark:bg-gray-800/40"}),e.jsx("div",{className:"card h-48 animate-pulse bg-white/40 dark:bg-gray-800/40"})]}),children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx(Ne,{data:ce}),e.jsx(ke,{data:de})]})}),e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"card h-48 mt-4 animate-pulse bg-white/40 dark:bg-gray-800/40"}),children:e.jsx("div",{className:"mt-4",children:e.jsx(Ce,{data:me})})}),e.jsxs("div",{className:"card student-glass flex items-center gap-4 p-4 shadow-md border-l-4 border-blue-400 mt-4",children:[e.jsx("svg",{className:"w-8 h-8 text-blue-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h.01M15 12h.01M7.5 19a9 9 0 1111 0H7.5z"})}),e.jsxs("div",{className:"text-gray-700 dark:text-gray-200 italic flex-1",children:["“",se,"” ",e.jsxs("span",{className:"not-italic text-sm text-gray-600 dark:text-gray-300",children:["— ",ae]})]})]}),e.jsx("div",{ref:Y,className:"font-semibold mb-2",children:"Recent Activity"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-3",children:[e.jsx("input",{type:"text",value:p,onChange:t=>G(t.target.value),placeholder:"Search purpose or action...",className:"input sm:flex-1","aria-label":"Search logs"}),e.jsxs("select",{value:j,onChange:t=>J(t.target.value),className:"input w-full sm:w-40","aria-label":"Filter by action",children:[e.jsx("option",{value:"all",children:"All actions"}),e.jsx("option",{value:"check-in",children:"Check-in"}),e.jsx("option",{value:"check-out",children:"Check-out"})]})]}),e.jsx("div",{className:"overflow-auto max-h-80 scroll-thin",children:e.jsxs("table",{className:"min-w-full text-left text-sm text-gray-800 dark:text-gray-200",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800/70",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-sm",children:"Action"}),e.jsx("th",{className:"px-3 py-2 text-sm",children:"Purpose"}),e.jsx("th",{className:"px-3 py-2 text-sm",children:"Check-in"}),e.jsx("th",{className:"px-3 py-2 text-sm",children:"Check-out"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200/60 dark:divide-gray-700/60",children:[V.map(t=>e.jsxs("tr",{className:"border-t border-gray-200/60 dark:border-gray-700/60",children:[e.jsx("td",{className:"px-3 py-2 text-sm",children:t.action}),e.jsx("td",{className:"px-3 py-2 text-sm",children:t.purpose||"-"}),e.jsx("td",{className:"px-3 py-2 text-sm",children:t.checkInTime?new Date(t.checkInTime).toLocaleString():"-"}),e.jsx("td",{className:"px-3 py-2 text-sm",children:t.checkOutTime?new Date(t.checkOutTime).toLocaleString():"-"})]},t._id)),V.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"px-3 py-6 text-center text-gray-500 dark:text-gray-400",colSpan:4,children:"No logs"})})]})]})})]})]}),e.jsx("div",{className:"fixed inset-x-0 bottom-2 z-40 px-4 md:hidden",children:e.jsxs("div",{className:"mx-auto max-w-md rounded-2xl bg-slate-900/95 border border-slate-700/80 shadow-lg shadow-black/40 backdrop-blur flex items-center justify-around py-2",children:[e.jsxs("button",{type:"button",onClick:()=>A(_,"qr"),className:"flex flex-col items-center gap-1 text-[11px] font-medium px-2 py-1 rounded-xl transition-colors "+(T==="qr"?"text-sky-300 bg-sky-500/15":"text-slate-200/80 hover:text-white hover:bg-slate-800/80"),children:[e.jsx(pe,{className:"h-5 w-5"}),e.jsx("span",{children:"QR Code"})]}),e.jsxs("button",{type:"button",onClick:()=>A(Y,"logs"),className:"flex flex-col items-center gap-1 text-[11px] font-medium px-2 py-1 rounded-xl transition-colors "+(T==="logs"?"text-emerald-300 bg-emerald-500/15":"text-slate-200/80 hover:text-white hover:bg-slate-800/80"),children:[e.jsx(be,{className:"h-5 w-5"}),e.jsx("span",{children:"Logs"})]}),e.jsxs("button",{type:"button",onClick:()=>A(z,"insights"),className:"flex flex-col items-center gap-1 text-[11px] font-medium px-2 py-1 rounded-xl transition-colors "+(T==="insights"?"text-amber-300 bg-amber-500/15":"text-slate-200/80 hover:text-white hover:bg-slate-800/80"),children:[e.jsx(fe,{className:"h-5 w-5"}),e.jsx("span",{children:"Insights"})]})]})})]}),y&&q.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[9999]",children:[e.jsx("div",{className:"absolute inset-0 bg-black/75 backdrop-blur-sm animate-fade-in",onClick:()=>w(!1)}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4","aria-modal":"true",role:"dialog",children:e.jsxs("div",{className:"relative",onClick:t=>t.stopPropagation(),children:[e.jsx("img",{src:s.profilePhotoUrl,alt:"Profile full view",loading:"lazy",decoding:"async",width:"1024",height:"768",className:"max-w-[92vw] max-h-[86vh] object-contain rounded-xl shadow-2xl animate-scale-in"}),e.jsxs("button",{type:"button",onClick:()=>w(!1),"aria-label":"Close",className:"group absolute -top-4 -right-4",children:[e.jsx("span",{className:"absolute inset-0 rounded-full bg-gradient-to-tr from-rose-500/40 to-fuchsia-500/40 blur-md opacity-0 group-hover:opacity-100 transition"}),e.jsx("span",{className:"relative inline-flex h-10 w-10 items-center justify-center rounded-full bg-gray-900/90 text-white border border-white/10 shadow-lg ring-1 ring-white/10 hover:scale-105 transition",children:e.jsx(K,{className:"h-5 w-5"})})]})]})})]}),document.body),v&&q.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[9999]",children:[e.jsx("div",{className:"absolute inset-0 bg-black/75 backdrop-blur-sm animate-fade-in",onClick:()=>N(!1)}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4","aria-modal":"true",role:"dialog",children:e.jsxs("div",{className:"relative",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"mx-auto bg-white dark:bg-gray-900 rounded-2xl p-5 shadow-2xl border border-black/10 dark:border-white/10 animate-scale-in",children:[e.jsx("div",{className:"p-4 rounded-lg bg-white",children:e.jsx("img",{src:s.qrCodeDataUrl,alt:"Full QR code",loading:"lazy",decoding:"async",width:"512",height:"512",className:"w-[80vw] max-w-[520px] aspect-square object-contain",style:{imageRendering:"pixelated"}})}),e.jsx("div",{className:"text-center text-sm mt-3 text-gray-600 dark:text-gray-300",children:"Present this QR at the gate"})]}),e.jsxs("button",{type:"button",onClick:()=>N(!1),"aria-label":"Close",className:"group absolute -top-4 -right-4",children:[e.jsx("span",{className:"absolute inset-0 rounded-full bg-gradient-to-tr from-emerald-500/40 to-sky-500/40 blur-md opacity-0 group-hover:opacity-100 transition"}),e.jsx("span",{className:"relative inline-flex h-10 w-10 items-center justify-center rounded-full bg-gray-900/90 text-white border border-white/10 shadow-lg ring-1 ring-white/10 hover:scale-105 transition",children:e.jsx(K,{className:"h-5 w-5"})})]})]})})]}),document.body),X&&q.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[10000]",style:{background:"#ffffff"},children:[e.jsx("button",{type:"button",onClick:()=>E(!1),"aria-label":"Close",className:"absolute top-3 right-3 z-[10001] inline-flex items-center gap-2 rounded-md px-3 py-2 text-sm bg-black/60 text-white hover:bg-black/70",children:"Close"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:e.jsx("img",{src:s.qrCodeDataUrl,alt:"QR",width:"640",height:"640",style:{imageRendering:"pixelated"},className:"w-[86vw] max-w-[680px] aspect-square object-contain"})})]}),document.body)]})}export{qe as default};
